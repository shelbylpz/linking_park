<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5-qrcode/2.3.4/html5-qrcode.min.js" integrity="sha512-k/KAe4Yff9EUdYI5/IAHlwUswqeipP+Cp5qnrsUjTPCgl51La2/JhyyjNciztD7mWNKLSXci48m7cctATKfLlQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    
    <style>
        main {
            display: flex;
            justify-content: center;
            align-items: center;
        }
        #reader {
            width: 600px;
        }
        #result {
            text-align: center;
            font-size: 1.5rem;
        }
    </style>
</head>

<body>
{% include "basetest.html" %}

<h1>Video en directo</h1>

<main>
    <div id="reader"></div>
    <div id="result"></div>
</main>
    

<script>

    const scanner = new Html5QrcodeScanner('reader', { 
        // Scanner will be initialized in DOM inside element with id of 'reader'
        qrbox: {
            width: 350,
            height: 350,
        },  // Sets dimensions of scanning box (set relative to reader element width)
        fps: 20, // Frames per second to attempt a scan
    });


    scanner.render(success, error);
    // Starts scanner

    function success(result) {

        scanner.clear(); // Clears scanning instance

        document.getElementById('reader').remove(); // Removes reader element from DOM since no longer needed

        window.location.replace('/testpago/' + result); //Redirects
    }

    function error(err) {
        console.error(err);
    }

</script>

{% include "end.html" %}
</body>